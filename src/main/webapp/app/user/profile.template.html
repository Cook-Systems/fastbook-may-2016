<md-content class="md-padding" >
  <div layout="row"  layout-xs="column">
    <md-card flex flex-gt-xs="25">
      <md-card-header>
    <!--    <md-card-avatar>
          <md-icon class="md-avatar-icon" md-svg-icon="img/icons/menu.svg"></md-icon> -->
        </md-card-avatar>
        <md-card-header-text>
          <span class="md-title">{{$profileCtrl.profileUser.firstName}}</span>
          <span class="md-title">{{$profileCtrl.profileUser.lastName}}</span>
          <span class="md-subhead">User since {{$profileCtrl.profileUser.joinDate | date}}</span>
        </md-card-header-text>
      </md-card-header>
      <img ng-src="app/user/zz_userdefaultphoto_large.png" class="md-card-image">
      <md-card-actions layout="row" layout-align="start center">
        <!-- Start Friend Relation Component -->
        <div ng-controller="FriendRelationController as relationCtrl">
          <div ng-if="relationCtrl.profileUser.id !== relationCtrl.loggedInUser.id">

            <md-button class="md-raised" aria-label="Add Friend" ng-click="relationCtrl.addFriend()" ng-if="!relationCtrl.relation">
              Add Friend
            </md-button>

            <div ng-if="relationCtrl.relation && !relationCtrl.relation.status && relationCtrl.loggedInUser.id !== relationCtrl.relation.id.sentId">
              <md-button class="md-raised waves-effect waves-light btn done" aria-label="Accept Request" ng-click="relationCtrl.acceptRequest()">
                Accept Request
              </md-button>

              <md-button class="md-raised waves-effect waves-light btn cancel" aria-label="Deny Request" ng-click="relationCtrl.denyRequest()">
                Deny Request
              </md-button>
            </div>

            <div ng-if="relationCtrl.relation && !relationCtrl.relation.status && relationCtrl.loggedInUser.id == relationCtrl.relation.id.sentId">
              <div class="md-raised waves-effect waves-light" aria-label="Request Pending">
                Request Pending
              </div>
            </div>

            <div class="md-raised" aria-label="You are friends" ng-if="relationCtrl.relation && relationCtrl.relation.status">
              Already Friends
            </div>
          </div>
        </div>
        <!-- End Friend Relation Component -->
      </md-card-actions>
      <md-card-title>
        <md-card-title-text>
          <h2 class="md-headline">About Me</h2>
        </md-card-title-text>
      </md-card-title>
      <md-card-content>
        <p>
        Birthday: {{$profileCtrl.profileUser.birthDate | date}}<br>
        Age: {{$profileCtrl.calculateAge()}}
        </p>
      </md-card-content>
    </md-card>

    <md-card flex flex-gt-xs="25" >
      <h2>Timeline</h2>
        <md-card-content>
          <md-input-container>
            <input type="text" placeholder="Post something on your timeline...">
          </md-input-container>
        </md-card-content>
    </md-card>

    <md-card flex flex-gt-xs="25">
      <h2>{{$profileCtrl.profileUser.firstName}}'s Friends</h2>
        <md-card-content>
          <md-virtual-repeat-container style="width: 100vw; height: 100vh;">
            <div md-virtual-repeat="user in $profileCtrl.friendList" class="repeated-item-vertical">
              <a ui-sref="profile({id: user.id})">{{user.firstName}} {{user.lastName}}</a>
            </div>
          </md-virtual-repeat-container>
        </md-card-content>
      </md-card>

    <md-card flex flex-gt-xs="25">
      <h2>{{$profileCtrl.profileUser.firstName}}'s Groups</h2>
        <md-card-content>
          </md-card-content>
        </md-card>

    </div>
</md-content>
